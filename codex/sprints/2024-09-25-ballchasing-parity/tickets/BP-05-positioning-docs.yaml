title: "[rlcoach] Finalize positioning/passing parity and update documentation"
type: feature
priority: P1
branch: "feature/bp-05-positioning-docs"
repo:
  url: https://github.com/treygoff/rlcoach
  root: .
  paths_in_scope:
    - src/rlcoach/analysis/positioning.py
    - src/rlcoach/analysis/passing.py
    - tests/analysis/**
    - tests/goldens/**
    - codex/plans/0925-ballchasing-parity-plan.md
    - codex/docs/**
  paths_out_of_scope:
    - src/rlcoach/analysis/movement.py
    - src/rlcoach/analysis/boost.py
context:
  stack: {lang: Python, framework: pytest, runtime: Python 3.10}
  versions: {pytest: "7.x"}
  style_guides: ["codex/docs/gpt5-codex-ticketing-guide.md", "codex/docs/gpt5-prompting-best-practices-guide.md"]
  related_issues:
    - codex/sprints/2024-09-25-ballchasing-parity/tickets/BP-01-parity-harness.yaml
    - codex/sprints/2024-09-25-ballchasing-parity/tickets/BP-04-kickoff-alignment.yaml
problem_statement: >
  After movement, boost, and kickoff parity, we must reconcile positioning/passing metrics and refresh docs/goldens so
  the parity harness passes end-to-end. This includes thirds/halves occupancy, possession windows, turnovers, and
  narrative documentation of the calibrated thresholds.
non_goals:
  - Do not revisit movement or boost calculations unless parity tests reveal blockers.
  - Do not make UI changes beyond markdown regeneration.
constraints:
  - Keep analyzer run-time linear in frame count.
  - Update documentation to reflect final metric definitions and include references to Ballchasing alignment.
artifacts_expected:
  output_mode: diff
  pr_title_template: "[positioning] Match Ballchasing thirds/possession metrics and refresh docs"
  pr_body_sections: ["Context", "Implementation", "Tests", "Risks", "Follow-ups"]
  decision_log: true
acceptance_criteria:
  - [ ] Parity harness passes for all monitored metrics on 0925 replay with defined tolerances.
  - [ ] Positioning analyzer matches Ballchasing halves/thirds occupancy within ±3 seconds per bucket.
  - [ ] Passing analyzer aligns possession time and turnover counts within ±5%.
  - [ ] Regenerate markdown/json goldens demonstrating aligned metrics and document thresholds in `codex/plans/0925-ballchasing-parity-plan.md`.
  - [ ] Summarize calibrated metrics and verification workflow in `codex/docs/json-report-markdown-mapping.md` or a new doc as appropriate.
verification:
  repro_steps: |
    python -m rlcoach.cli report-md Replay_files/0925.replay --out out --pretty
  checks:
    - cmd: "pytest tests/analysis/test_ballchasing_parity.py -q"
    - cmd: "pytest -q"
workflow_expectations:
  - plan-first
  - implement
  - self-check
  - emit_patch
  - run_verification
  - summarize
codex:
  approvals: on-request
  sandbox: workspace-write
  web_search: false
  progress: brief
  review:
    ask_for_diff_format: unified
  agents_md: true
